!function(e,a,n){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(a||n)}(function(e){"use strict";var a=function(a,n,t){var s={invalid:[],getCaret:function(){try{var e,n=0,t=a.get(0),i=document.selection,o=t.selectionStart;return i&&-1===navigator.appVersion.indexOf("MSIE 10")?((e=i.createRange()).moveStart("character",-s.val().length),n=e.text.length):(o||"0"===o)&&(n=o),n}catch(e){}},setCaret:function(e){try{if(a.is(":focus")){var n,t=a.get(0);t.setSelectionRange?t.setSelectionRange(e,e):((n=t.createTextRange()).collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select())}}catch(e){}},events:function(){a.on("keydown.mask",function(e){a.data("mask-keycode",e.keyCode||e.which),a.data("mask-previus-value",a.val()),a.data("mask-previus-caret-pos",s.getCaret()),s.maskDigitPosMapOld=s.maskDigitPosMap}).on(e.jMaskGlobals.useInput?"input.mask":"keyup.mask",s.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){a.keydown().keyup()},100)}).on("change.mask",function(){a.data("changed",!0)}).on("blur.mask",function(){r===s.val()||a.data("changed")||a.trigger("change"),a.data("changed",!1)}).on("blur.mask",function(){r=s.val()}).on("focus.mask",function(a){!0===t.selectOnFocus&&e(a.target).select()}).on("focusout.mask",function(){t.clearIfNotMatch&&!i.test(s.val())&&s.val("")})},getRegexMask:function(){for(var e,a,t,s,i,r,l=[],c=0;c<n.length;c++)(e=o.translation[n.charAt(c)])?(a=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),t=e.optional,(s=e.recursive)?(l.push(n.charAt(c)),i={digit:n.charAt(c),pattern:a}):l.push(t||s?a+"?":a)):l.push(n.charAt(c).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return r=l.join(""),i&&(r=r.replace(new RegExp("("+i.digit+"(.*"+i.digit+")?)"),"($1)?").replace(new RegExp(i.digit,"g"),i.pattern)),new RegExp(r)},destroyEvents:function(){a.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var n,t=a.is("input")?"val":"text";return arguments.length>0?(a[t]()!==e&&a[t](e),n=a):n=a[t](),n},calculateCaretPosition:function(){var e=a.data("mask-previus-value")||"",n=s.getMasked(),t=s.getCaret();if(e!==n){var i=a.data("mask-previus-caret-pos")||0,o=n.length,r=e.length,l=0,c=0,d=0,u=0,p=0;for(p=t;p<o&&s.maskDigitPosMap[p];p++)c++;for(p=t-1;p>=0&&s.maskDigitPosMap[p];p--)l++;for(p=t-1;p>=0;p--)s.maskDigitPosMap[p]&&d++;for(p=i-1;p>=0;p--)s.maskDigitPosMapOld[p]&&u++;if(t>r)t=10*o;else if(i>=t&&i!==r){if(!s.maskDigitPosMapOld[t]){var f=t;t-=u-d,t-=l,s.maskDigitPosMap[t]&&(t=f)}}else t>i&&(t+=d-u,t+=c)}return t},behaviour:function(n){n=n||window.event,s.invalid=[];var t=a.data("mask-keycode");if(-1===e.inArray(t,o.byPassKeys)){var i=s.getMasked(),r=s.getCaret();return setTimeout(function(){s.setCaret(s.calculateCaretPosition())},e.jMaskGlobals.keyStrokeCompensation),s.val(i),s.setCaret(r),s.callbacks(n)}},getMasked:function(e,a){var i,r,l,c=[],d=void 0===a?s.val():a+"",u=0,p=n.length,f=0,m=d.length,v=1,h="push",g=-1,k=0,_=[];for(t.reverse?(h="unshift",v=-1,i=0,u=p-1,f=m-1,r=function(){return u>-1&&f>-1}):(i=p-1,r=function(){return u<p&&f<m});r();){var b=n.charAt(u),y=d.charAt(f),S=o.translation[b];S?(y.match(S.pattern)?(c[h](y),S.recursive&&(-1===g?g=u:u===i&&u!==g&&(u=g-v),i===g&&(u-=v)),u+=v):y===l?(k--,l=void 0):S.optional?(u+=v,f-=v):S.fallback?(c[h](S.fallback),u+=v,f-=v):s.invalid.push({p:f,v:y,e:S.pattern}),f+=v):(e||c[h](b),y===b?(_.push(f),f+=v):(l=b,_.push(f+k),k++),u+=v)}var E=n.charAt(i);p!==m+1||o.translation[E]||c.push(E);var $=c.join("");return s.mapMaskdigitPositions($,_,m),$},mapMaskdigitPositions:function(e,a,n){var i=t.reverse?e.length-n:0;s.maskDigitPosMap={};for(var o=0;o<a.length;o++)s.maskDigitPosMap[a[o]+i]=1},callbacks:function(e){var i=s.val(),o=i!==r,l=[i,e,a,t],c=function(e,a,n){"function"==typeof t[e]&&a&&t[e].apply(this,n)};c("onChange",!0===o,l),c("onKeyPress",!0===o,l),c("onComplete",i.length===n.length,l),c("onInvalid",s.invalid.length>0,[i,e,a,s.invalid,t])}};a=e(a);var i,o=this,r=s.val();n="function"==typeof n?n(s.val(),void 0,a,t):n,o.mask=n,o.options=t,o.remove=function(){var e=s.getCaret();return o.options.placeholder&&a.removeAttr("placeholder"),a.data("mask-maxlength")&&a.removeAttr("maxlength"),s.destroyEvents(),s.val(o.getCleanVal()),s.setCaret(e),a},o.getCleanVal=function(){return s.getMasked(!0)},o.getMaskedVal=function(e){return s.getMasked(!1,e)},o.init=function(r){if(r=r||!1,t=t||{},o.clearIfNotMatch=e.jMaskGlobals.clearIfNotMatch,o.byPassKeys=e.jMaskGlobals.byPassKeys,o.translation=e.extend({},e.jMaskGlobals.translation,t.translation),o=e.extend(!0,{},o,t),i=s.getRegexMask(),r)s.events(),s.val(s.getMasked());else{t.placeholder&&a.attr("placeholder",t.placeholder),a.data("mask")&&a.attr("autocomplete","off");for(var l=0,c=!0;l<n.length;l++){var d=o.translation[n.charAt(l)];if(d&&d.recursive){c=!1;break}}c&&a.attr("maxlength",n.length).data("mask-maxlength",!0),s.destroyEvents(),s.events();var u=s.getCaret();s.val(s.getMasked()),s.setCaret(u)}},o.init(!a.is("input"))};e.maskWatchers={};var n=function(){var n=e(this),s={},i=n.attr("data-mask");if(n.attr("data-mask-reverse")&&(s.reverse=!0),n.attr("data-mask-clearifnotmatch")&&(s.clearIfNotMatch=!0),"true"===n.attr("data-mask-selectonfocus")&&(s.selectOnFocus=!0),t(n,i,s))return n.data("mask",new a(this,i,s))},t=function(a,n,t){t=t||{};var s=e(a).data("mask"),i=JSON.stringify,o=e(a).val()||e(a).text();try{return"function"==typeof n&&(n=n(o)),"object"!=typeof s||i(s.options)!==i(t)||s.mask!==n}catch(e){}};e.fn.mask=function(n,s){s=s||{};var i=this.selector,o=e.jMaskGlobals,r=o.watchInterval,l=s.watchInputs||o.watchInputs,c=function(){if(t(this,n,s))return e(this).data("mask",new a(this,n,s))};return e(this).each(c),i&&""!==i&&l&&(clearInterval(e.maskWatchers[i]),e.maskWatchers[i]=setInterval(function(){e(document).find(i).each(c)},r)),this},e.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each(function(){var a=e(this).data("mask");a&&a.remove().removeData("mask")})},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(a){((a=a||e.jMaskGlobals.maskElements)instanceof e?a:e(a)).filter(e.jMaskGlobals.dataMaskAttr).each(n)};var s,i,o,r={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&(s="input",o=document.createElement("div"),(i=(s="on"+s)in o)||(o.setAttribute(s,"return;"),i="function"==typeof o[s]),o=null,i),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},(r=e.jMaskGlobals=e.extend(!0,{},r,e.jMaskGlobals)).dataMask&&e.applyDataMask(),setInterval(function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()},r.watchInterval)},window.jQuery,window.Zepto);var Travelsoft=Travelsoft||{};!function(e){"use strict";e.SITE_ADDRESS="https://vetliva.ru",e.VIDEO_URL="https://www.youtube.com/embed/",e.REQUEST_URL=e.SITE_ADDRESS+"/travelsoft.pm",e.JS_URL=e.REQUEST_URL+"/assets/js",e.CSS_URL=e.REQUEST_URL+"/assets/css"}(Travelsoft),function(e){"use strict";e.utils={callbacks:{},makeid:function(){for(var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=a.charAt(Math.floor(Math.random()*a.length));return e},sendRequest:function(a,n,t){var s,i=!1,o="cb"+String(Math.random()).slice(-6),r=e.REQUEST_URL+"/?",l=n;function c(){i||(delete e.utils.callbacks[o],console.warn("Query error "+r))}l.push("callback=Travelsoft.utils.callbacks."+o),l.push("method="+a),r+=l.join("&"),e.utils.callbacks[o]=function(a){i=!0,delete e.utils.callbacks[o],t(a)},(s=document.createElement("script")).type="text/javascript",s.onload=c,s.onerror=c,s.src=r,document.body.appendChild(s)},screen:function(e){var a="";return"string"==typeof e&&(a=e.replace(/&/g,"&amp;"),a=e.replace(/</g,"&lt;"),a=e.replace(/"/g,"&quot;"),a=e.replace(/>/g,"&gt;"),a=e.replace(/'/g,"&#039;"),a=e.replace(/script/g,""),a=e.replace(/onclick/g,""),a=e.replace(/onchange/g,""),a=e.replace(/onkeydown/g,""),a=e.replace(/onkeypress/g,""),a=e.replace(/onmouseout/g,""),a=e.replace(/onmouseover/g,"")),a},HWatcher:{__prev:null,__id:null,__parent:null,watch:function(e){var a=this;a.unwatch(e),a.__id=setInterval(function(){a.__prev!==e.scrollHeight&&(a.__parent&&(a.__parent.style.height=e.scrollHeight+10+"px"),a.__prev=e.scrollHeight)},100)},unwatch:function(e){this.__id&&(clearInterval(this.__id),this.__id=null,this.__prev=null,e.style.height=0)}}}}(Travelsoft),function(e,a,n,t){"use strict";var s={};function i(e,n,t){t=t||0,a(parent.document).find("html").animate({scrollTop:e.offset().top+n.offset().top-t},500)}function o(e){e.css({opacity:.4})}function r(e){e.css({opacity:1})}function l(a,n,t,s){var i=e.utils.makeid();return`<div class="panel panel-default">\n                        <div class="panel-heading">\n                          <h4 class="panel-title">\n                                  <a class="panel-collapser" data-toggle="collapse" data-parent="#${t}" href="#collapse-${i}">\n                                    ${a}\n                                  </a>\n                            </h4>\n                        </div>\n                        <div id="collapse-${i}" class="panel-collapse collapse ${s}">\n                          <div class="panel-body">\n                              ${n}\n                          </div>\n                        </div>\n                    </div>`}function c(a,n){document.body.innerHTML=a,e.utils.HWatcher.__parent=window.parent.document.getElementById("search-result_"+n),e.utils.HWatcher.watch(document.getElementById("container"))}function d(a){var t,i,o=e.utils.screen;s[a.pager.page]=`<div class="container" id="container">\n                                                        ${i=a.items||[],i.length?i.map(function(a){return`<div class="row thumbnail mrtb-10">\n                                                                                    <div class="row-flex row-flex-wrap">\n                                                                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">\n                                                                                        ${a.imgSrc?`<img class="main-img" src="${o(e.SITE_ADDRESS+a.imgSrc)}">`:""}\n                                                                                        </div>\n                                                                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12 flex-col">\n                                                                                            <div class="name">${o(a.name)}</div>\n                                                                                            <div class="stars-block">\n                                                                                                ${function(e){for(var a="",n=1;n<=e;n++)a+='<span class="glyphicon glyphicon-star" aria-hidden="true"></span>';return a}(a.stars)}\n                                                                                            </div>\n                                                                                            <ul>\n                                                                                         ${n=a.text,t="",n.address&&(t+=`<li><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> ${o(n.address)}</li>`),n.route&&(t+=`<li><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> ${o(n.route)}</li>`),n.days&&(t+=`<li><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Количество дней: ${o(n.days)}</li>`),n.duration_time&&(t+=`<li><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Количество часов: ${o(n.duration_time)}</li>`),a.text.distance.minsk&&(t+=`<li><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Расстояние до Минска: ${o(a.text.distance.minsk)} км</li>`),a.text.distance.center&&(t+=`<li><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Расстояние до цента: ${o(a.text.distance.center)} км</li>`),a.text.distance.airport&&(t+=`<li><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Расстояние до аэропорта: ${o(a.text.distance.airport)} км</li>`),t}\n                                                                                                \n                                                                                            </ul>\n                                                                                            <div class="show-offers-block flex-grow">\n                                                                                                <div class="details-links">\n                                                                                                    <a data-request='${JSON.stringify(a.request)}' class="detail-link __desc" href="#">Описание</a>\n                                                                                                    <a data-request='${JSON.stringify(a.request)}' class="detail-link __on-map" href="#">На карте</a>\n                                                                                                    <a data-request='${JSON.stringify(a.request)}' class="detail-link __video" href="#">Видео</a>\n                                                                                                </div>\n                                                                                            </div>\n                                                                                            <div class="show-offers-block flex-grow">\n                                                                                                    <button data-offers-request='${JSON.stringify(a.request)}' class="btn btn-primary show-offers" type="button"><span class="price-from">${a.text.price}</span> <span class="chevron glyphicon glyphicon-chevron-down" aria-hidden="true"></button>\n                                                                                            </div>\n                                                                                        </div>\n                                                                                    </div>\n                                                                                </div>`;var n,t}).join(""):`<div class="row">\n                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 not-found-text">По Вашему запросу ничего не найдено. Пожалуйста, измените параметры поиска или оставьте заявку.</div>\n                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 callback-form">\n                                                                <input type="hidden" name="search_item_id" value="${1===a.search_items_id.length?a.search_items_id[0]:0}">\n                                                                    <div class="form-group">\n                            <label for="full_name">ФИО<span class="star">*</span></label>\n                            <span class="error-container"></span>\n                            <input placeholder="Иван Иванович Иванов" name="full_name" value="" type="text" class="form-control">\n                        </div>\n                        <div class="form-group">\n                            <label for="phone">Телефон</label>\n                            <span class="error-container"></span>\n                            <input placeholder="+375441111111" name="phone" type="tel" value="" class="form-control">\n                        </div>\n                        <div class="form-group">\n                            <label for="email">Email<span class="star">*</span></label>\n                            <span class="error-container"></span>\n                            <input placeholder="example@gmail.com" name="email" type="email" value="" class="form-control">\n                        </div>\n                        <div class="form-group">\n                            <label for="date">Дата<span class="star">*</span></label>\n                            <span class="error-container"></span>\n                            <input placeholder="__.__.____" name="date" type="text" value="" class="form-control">\n                            \n                        </div>\n                        <div class="form-group">\n                            <label for="comment">Текст заявки<span class="star">*</span></label>\n                            <span class="error-container"></span>\n                            <textarea name="comment" class="form-control"></textarea>\n                        </div>\n                        <div class="form-group text-right">\n                            <button type="button" id="callback-sender-btn" class="btn btn-primary">Отправить</button>\n                        </div>\n                                                                </div>\n                                                                                </div><img style="display: none;" src="" onerror="jQuery('.callback-form input[name=date]').mask('00.00.0000');">`}\n                                                        <div class="row text-right">${t=a.pager,new n(function(e){for(var a=[],n=0;n<e;n++)a.push(n);return a}(t.records),t.numberPerPage).page(t.page).getHtml()}\n                                        </div>\n                                                </div>`,c(s[a.pager.page],a.main_container)}function u(a){var n;"string"==typeof s[a.page]?c(s[a.page],a.insertion_id):e.utils.sendRequest("GetSearchResultRenderData",[(n=window.parent.location.search.replace("?","").split("&").filter(function(e){return e.length>0&&0===e.indexOf("tpm_params")}),n.push("tpm_params[type]="+a.type),n.push("tpm_params[page]="+a.page),n.push("tpm_params[citizen_price]="+a.citizen_price),n.push("tpm_params[currency]="+a.currency),n.push("tpm_params[number_per_page]="+a.numberPerPage),n.push("tpm_params[agent]="+a.agent),n.push("tpm_params[hash]="+a.hash),n.join("&"))],function(e){return function(a){var n=a;if(n.isError)return console.warn(a.errorMessage),void d({items:[],pager:{page:1,numberPerPage:0},main_container:e.insertion_id});n.data.pager.numberPerPage=e.numberPerPage,n.data.main_container=e.insertion_id,n.data.search_items_id=function(){var e=window.parent.location.search.replace("?","").split("&").filter(function(e){return e.length>0&&0===e.indexOf("tpm_params")}),a=[],n=[],t=0;if(e.length>0)for(t=0;t<e.length;t+=1)/tpm_params(.*)id(.*)/.test(e[t])&&(n=e[t].split("="),a.push(n[1]));return a}(),d(n.data)}}(a))}function p(e,a,n){a.find(".info-block").remove(),a.append(`\n            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 collapsing-block info-block hidden">\n                <div style="width: 100%">${e.message}</div>\n        </div>`),a.find(".info-block").removeClass("hidden"),"function"==typeof n&&n()}function f(e){e.find("span.chevron").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")}function m(){a(".show-offers").each(function(){v(a(this))})}function v(e){e.find("span.chevron").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")}function h(e,n,t){var s=null!==e?e.hasClass("hidden"):null;a(".collapsing-block").addClass("hidden"),null!==s?s?(e&&e.removeClass("hidden"),"function"==typeof n&&n()):(e&&e.addClass("hidden"),"function"==typeof t&&t()):"function"==typeof n&&n()}function g(n,s,i){a(".pagination li.active a").data("page");var o="map-"+e.utils.makeid();s.find(".info-block").remove(),s.append(`<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 collapsing-block show-on-map-block hidden">\n                                        <div style="width: 100%">\n                                            <div data-coords-data='${JSON.stringify(n)}' id="${o}"></div>\n                                        </div>\n                                    </div>`),s.find(".show-on-map-block").removeClass("hidden"),"function"==typeof i&&i(),function(e){var n=e.data("coords-data"),s=null,i=[];if(a.isArray(n))if(1===n.length)(s=new t.Map(e.attr("id"),{center:[Number(n[0].lat),Number(n[0].lng)],zoom:9,controls:["zoomControl","fullscreenControl"]})).geoObjects.add(new t.Placemark(s.getCenter(),{balloonContent:n[0].content}));else{s=new t.Map(e.attr("id"),{center:[0,0],zoom:8,controls:["zoomControl","fullscreenControl"]});for(var o=0;o<n.length;o++)i.push([n[o].lat,n[o].lng]);t.route(i,{mapStateAutoApply:!0}).then(function(e){var a,t=e.getWayPoints();s.geoObjects.add(e),t.options.set("preset","islands#blueStretchyIcon");for(var i=0;i<n.length;i++)(a=t.get(i)).properties.set("iconContent",n[i].title),a.options.set("hasBalloon",!1)})}}(a(`#${o}`))}e.searchResult={init:function(n){var t=n;u(t),a(document).on("click",".show-offers",function(n){var t=a(this),s=t.closest(".thumbnail"),i=s.find(".offers");i.length?h(i,function(){f(t)},function(){v(t)}):(h(null,function(){m()}),f(t),o(t),p({message:"Идет загрузка предложений. Пожалуйста, подождите..."},s),e.utils.sendRequest("GetOffersRenderData",[t.data("offers-request").join("&")],function(n){return function(s){if(s.isError)return console.warn(s.errorMessage),void p({message:"Предложения отсутствуют."},n,function(){r(t)});!function(n,t,s){a(".pagination li.active a").data("page");var i=e.utils.screen;t.find(".info-block").remove(),t.append(`\n            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 collapsing-block offers hidden">\n                <div style="width: 100%">\n                    ${function(n){for(var t="",s=0;s<n.length;s++)t+=`<div class="row offer-row mrtb-10">\n                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-6">\n                                    ${n[s].date?`<b>${i(n[s].date)}</b>`:n[s].img_src?`<img class="main-img" src="${e.SITE_ADDRESS+"/"+i(n[s].img_src)}">`:""}</b>\n                                </div>\n                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-6">\n                                    ${n[s].service?`<div class="name">${i(n[s].service)}</div><h5>${i(n[s].rate)}</h5>`:`<div class="name">${i(n[s].service)}</div>`}\n                                </div>\n                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 text-right">\n                                    <b>${i(n[s].price)}</b>${n[s].citizenprice?`<br><small>${n[s].citizenprice}</small>`:""}\n                                </div>\n                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 text-right">\n                                    <button data-add2cart="${i(n[s].add2cart)}" class="btn btn-primary booking" type="button">Бронировать</button>\n                                    ${n[s].rate_desc.length>0?'<div class="about-rate"><a role="button" href="javascript:void(0)">О тарифе</a></div>':""}\n                                    ${"object"!=typeof n[s].room_desc||a.isArray(n[s].room_desc)?"":'<div class="about-room"><a role="button" href="javascript:void(0)">О номере</a></div>'}\n                                </div>\n                            ${n[s].rate_desc.length>0?`<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 rate-desc hidden">\n                                        <div class="rate-desc-text">${i(n[s].rate_desc)}</div>\n                                </div>`:""}\n                                \n                                ${"object"!=typeof n[s].room_desc||a.isArray(n[s].room_desc)?"":`<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 room-desc hidden">\n                                            ${n[s].room_desc.SQUARE>0?`<div class="square"><b>Площадь</b>: ${i(n[s].room_desc.SQUARE)}</div>`:""}\n                                            ${n[s].room_desc.BAD1>0?`<div class="bad_1"><b>Количество одноместных кроватей</b>: ${i(n[s].room_desc.BAD1)}</div>`:""}\n                                            ${n[s].room_desc.BAD2>0?`<div class="bad_2"><b>Количество двухместных кроватей</b>: ${i(n[s].room_desc.BAD2)}</div>`:""}\n                                            ${n[s].room_desc.SOFA_BAD>0?`<div class="sofa-bad"><b>Количество диван-кроватей</b>: ${i(n[s].room_desc.SOFA_BAD)}</div>`:""}\n                                            ${n[s].room_desc.PLACES_MAIN>0?`<div class="main-places"><b>Количество основных мест</b>: ${i(n[s].room_desc.PLACES_MAIN)}</div>`:""}\n                                            ${n[s].room_desc.PLACES_ADD>0?`<div class="add-places"><b>Количество дополнительных мест</b>: ${i(n[s].room_desc.PLACES_ADD)}</div>`:""}\n                                            ${n[s].room_desc.PEOPLE>0?`<div class="people"><b>Максимальное количество человек</b>: ${i(n[s].room_desc.PEOPLE)}</div>`:""}\n                                            ${a.isArray(n[s].room_desc.SERVICES),n[s].room_desc.SERVICES.length>0?`<div class="people"><b>Услуги</b>: ${n[s].room_desc.SERVICES.join(", ")}</div>`:""}\n                                            ${n[s].room_desc.DESC>0?`<div class="room-desc-text">${i(n[s].room_desc.DESC)}</div>`:""}\n                                </div>`}\n                                \n                            </div>`;return t}(n)}\n                </div>\n            </div>\n        `),t.find(".offers").removeClass("hidden"),"function"==typeof s&&s()}(s.data,n,function(){r(t)})}}(s))),n.preventDefault()}),a(document).on("click",".about-rate",function(e){a(this).closest(".offer-row").find(".rate-desc").toggleClass("hidden"),e.preventDefault()}),a(document).on("click",".about-room",function(e){a(this).closest(".offer-row").find(".room-desc").toggleClass("hidden"),e.preventDefault()}),a(document).on("click",".detail-link.__desc",function(n){var t=a(this),s=t.closest(".thumbnail"),i=s.find(".detail-desc-block");i.length?h(i,function(){m()},function(){m()}):(h(null,function(){m()},function(){m()}),o(t),p({message:"Идет загрузка информации. Пожалуйста, подождите..."},s),e.utils.sendRequest("GetDetailDescriptionRenderData",[t.data("request").join("&")],function(n){return function(s){if(s.isError)return console.warn(s.errorMessage),void p({message:"Информация отсутствует."},n,function(){r(t)});!function(n,t,s){a(".pagination li.active a").data("page");var i=e.utils.makeid(),o="accordion-"+e.utils.makeid(),r="in";t.find(".info-block").remove(),t.append(`\n            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 collapsing-block detail-desc-block hidden">\n                \n                    ${function(n){var t="";return a.isArray(n.pictures.big)&&(t+=`<section id="${i}" class="detail-slider">\n                                    <ul class="rslides">\n                                        ${function(a){t="";for(var n=0;n<a.length;n++)t+=`<li><img src="${e.SITE_ADDRESS+a[n]}"></li>`;return t}(n.pictures.big)}\n                                    </ul>\n                            </section>`),t+=`<div class="panel-group" id="${o}">`,n.desc&&(t+=l("Описание",n.desc,o,r),r=""),n.program&&(t+=l("Программа тура",n.program,o,r),r=""),n.profiles&&(t+=l("Профиль",function(a){var n='<div class="featured-service">';for(var t in a.TYPE_GROUP)n+=`<div class="list-service-section">${a.TYPE_SECTIONS?`${a.TYPE_SECTIONS[t].PICTURE.SRC?`<div class="icon-service" style="float:left; top:2px"><img src="${e.SITE_ADDRESS+a.TYPE_SECTIONS[t].PICTURE.SRC}"></div>`:""}\n                                                                            <h4>${a.TYPE_SECTIONS[t].TITLE}</h4>`:""}\n                                                                            \n                                                                        </div>\n                                                                        <ul class="service-accmd">\n                                                                            ${function(a){var n="";for(var t in a)n+=`<li><div><img src="${e.SITE_ADDRESS}/local/templates/travelsoft/images/icon-check.png" alt=""></div>${a[t].TITLE} ${a[t].PAID?'<a data-content="За дополнительную плату">(<i class="fa fa-dollar"></i>)</a>':""}</li>`;return n}(a.TYPE_GROUP[t])}\n                                                                        </ul>`;return n+="</div>"}(n.profiles),o,r),r=""),n.services&&(t+=l("Услуги",function(a){var n='<div class="featured-service">';for(var t in a.SERVICES_GROUP)n+=`<div class="list-service-section">\n                                                                            ${a.SERVICES_SECTIONS[t].PICTURE.SRC?`<div class="icon-service" style="float:left; top:2px"><img src="${e.SITE_ADDRESS+a.SERVICES_SECTIONS[t].PICTURE.SRC}"></div>`:""}\n                                                                            <h4>${a.SERVICES_SECTIONS[t].TITLE}</h4>\n                                                                        </div>\n                                                                        <ul class="service-accmd">\n                                                                            ${function(a){var n="";for(var t in a)n+=`<li><div><img src="${e.SITE_ADDRESS}/local/templates/travelsoft/images/icon-check.png" alt=""></div>${a[t].TITLE}</li>`;return n}(a.SERVICES_GROUP[t])}\n                                                                        </ul>`;return n+="</div>"}(n.services),o,r),r=""),n.medecine_services&&(t+=l("Медицинские услуги",function(a){var n='<div class="featured-service">';for(var t in a.MED_SERVICES_GROUP)n+=`<div class="list-service-section">\n                                                                            <h4>${a.MED_SERVICES_SECTIONS[t].TITLE}</h4>\n                                                                        </div>\n                                                                        <ul class="service-accmd">\n                                                                            ${function(a){var n="";for(var t in a)n+=`<li><div><img src="${e.SITE_ADDRESS}/local/templates/travelsoft/images/icon-check.png" alt=""></div>${a[t].TITLE} ${a[t].PAID?'<a data-content="За дополнительную плату">(<i class="fa fa-dollar"></i>)</a>':""}</li>`;return n}(a.MED_SERVICES_GROUP[t])}\n                                                                        </ul>`;return n+="</div>"}(n.medecine_services),o,r),r=""),n.children_services&&(t+=l("Услуги для детей",n.children_services,o,r),r=""),n.food&&(t+=l("Питание",n.food,o,r),r=""),n.rooms_base&&(t+=l("Номерная база",n.rooms_base,o,r),r=""),n.addinfo&&(t+=l("Дополнительная информация",n.addinfo,o,r),r=""),t+="</div>"}(n)}\n                \n            </div>\n        `),t.find(".detail-desc-block").removeClass("hidden"),"function"==typeof s&&s(),function(e){e.find(".rslides").responsiveSlides({auto:!1,pager:!1,nav:!0,speed:500})}(a("#"+i))}(s.data,n,function(){r(t)})}}(s))),n.preventDefault()}),a(document).on("click",".detail-link.__on-map",function(n){var t=a(this),s=t.closest(".thumbnail"),i=s.find(".show-on-map-block");i.length?h(i,function(){m()},function(){m()}):(h(null,function(){m()},function(){m()}),o(t),p({message:"Идет загрузка карты. Пожалуйста, подождите..."},s),e.utils.sendRequest("GetDetailMapRenderData",[t.data("request").join("&")],function(e){return function(a){if(a.isError)return console.warn(a.errorMessage),void p({message:"Информация отсутствует."},e,function(){r(t)});g(a.data,e,function(){r(t)})}}(s))),n.preventDefault()}),a(document).on("click",".detail-link.__video",function(n){var t=a(this),s=t.closest(".thumbnail"),i=s.find(".video-block");i.length?h(i,function(){m()},function(){m()}):(h(null,function(){m()},function(){m()}),o(t),p({message:"Идет загрузка видео. Пожалуйста, подождите..."},s),e.utils.sendRequest("GetDetailVideoRenderData",[t.data("request").join("&")],function(n){return function(s){if(s.isError)return console.warn(s.errorMessage),void p({message:"Видео отсутствует."},n,function(){r(t)});s.data.code?function(n,t,s){a(".pagination li.active a").data("page"),t.find(".info-block").remove(),t.append(`<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 collapsing-block video-block hidden">\n                                        <div style="width: 100%">\n                                            <iframe class="video-frame" height="100%" width="100%" style="border: none;" src="${e.VIDEO_URL+n.code}" allowfullscreen=""></iframe>\n                                        </div>\n                                    </div>`),t.find(".video-block").removeClass("hidden"),"function"==typeof s&&s()}(s.data,n,function(){r(t)}):p({message:"Видео отсутствует."},n,function(){r(t)})}}(s))),n.preventDefault()}),a(document).on("click",".pagination a",function(e){e.preventDefault(),a(this).parent().hasClass("active")||(t.page=a(this).data("page"),u(t))}),a(document).on("click",".booking",function(n){var t=a(this).data("add2cart");n.preventDefault(),t?window.parent.open(e.REQUEST_URL+"/?method=Booking&tpm_params[add2cart]="+t):alert("Some error. Please, try later.")}),a(document).on("click",".panel-collapser",function(){i(a(this),a(parent.document).find("#"+n.insertion_id),100)}),a(document).on("click","#callback-sender-btn",function(){var t=a(this),s=t.closest(".callback-form"),o={full_name:s.find("input[name='full_name']").val(),phone:s.find("input[name='phone']").val(),email:s.find("input[name='email']").val(),date:s.find("input[name='date']").val(),comment:s.find("textarea[name='comment']").val(),agent_id:n.agent,search_item_id:s.find("input[name='search_item_id']").val()},r=!1;for(var l in s.find(".error-container").each(function(){var e=a(this);e.removeClass("active"),e.html("")}),o)switch(l){case"full_name":o[l].length<=2&&(r=!0,s.find("input[name='full_name']").prev(".error-container").addClass("active").text("Укажите ФИО"));break;case"comment":o[l].length<=2&&(r=!0,s.find("textarea[name='comment']").prev(".error-container").addClass("active").text("Укажите текст заявки"));break;case"phone":o[l].length>0&&!/^\s*(?:\+?(\d{1,3}))?([-. (]*(\d{3})[-. )]*)?((\d{3})[-. ]*(\d{2,4})(?:[-.x ]*(\d+))?)\s*$/gm.test(o[l])&&(r=!0,s.find("input[name='phone']").prev(".error-container").addClass("active").text("Укажите телефон в международном формате"));break;case"email":/^[-._a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\.)+[a-z]{2,6}$/.test(o[l])||(r=!0,s.find("input[name='email']").prev(".error-container").addClass("active").text("Укажите корректный email"));break;case"date":o[l].length||(r=!0,s.find("input[name='date']").prev(".error-container").addClass("active").text("Укажите дату"))}r?i(a(".callback-form .error-container.active").first(),s,-200):(t.prop("disabeled",!0).css({opacity:.5}),e.utils.sendRequest("SendCallbackForm",[a.param({tpm_params:o})],function(e,a){return function(n){e.parent().find(".not-found-text").remove(),e.html(""),a.remove(),i(e,e,-200),n.isError?e.html('<span class="error-container">Произошла ошибка при попытке отправить заявку. Пожалуйста, попробуйте повторить поиск через 5 минут.</span>'):n.data.isOk&&e.html('<span class="message-ok">Спасибо! Ваша заявка принята. Втечение 15 минут наши менеджеры свяжутся с Вами.</span>')}}(s,t)))})}}}(Travelsoft,jQuery,PageNavigator,ymaps);